<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>正则表达式 | lzw Love Hj</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="正则表达式定义了字符串的模式。 正则表达式可以用来搜索、编辑或处理文本。 正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。 Java正则表达式和Perl的是最为相似的。 java.util.regex包主要包括以下三个类  Pattern类：pattern对象是一个正则表达式的编译表示。Pattern类没有公共构造方法。要创建一个Pattern对象，你必须首先调用其公共静态编译方法，">
<meta name="keywords" content="正则表达式">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式">
<meta property="og:url" content="http://yoursite.com/2017/10/12/syntactic_sugar/regex/index.html">
<meta property="og:site_name" content="lzw Love Hj">
<meta property="og:description" content="正则表达式定义了字符串的模式。 正则表达式可以用来搜索、编辑或处理文本。 正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。 Java正则表达式和Perl的是最为相似的。 java.util.regex包主要包括以下三个类  Pattern类：pattern对象是一个正则表达式的编译表示。Pattern类没有公共构造方法。要创建一个Pattern对象，你必须首先调用其公共静态编译方法，">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-10-13T15:24:30.022Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="正则表达式">
<meta name="twitter:description" content="正则表达式定义了字符串的模式。 正则表达式可以用来搜索、编辑或处理文本。 正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。 Java正则表达式和Perl的是最为相似的。 java.util.regex包主要包括以下三个类  Pattern类：pattern对象是一个正则表达式的编译表示。Pattern类没有公共构造方法。要创建一个Pattern对象，你必须首先调用其公共静态编译方法，">
  
    <link rel="alternate" href="/atom.xml" title="lzw Love Hj" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">lzw Love Hj</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-syntactic_sugar/regex" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/12/syntactic_sugar/regex/" class="article-date">
  <time datetime="2017-10-12T13:20:09.487Z" itemprop="datePublished">2017-10-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      正则表达式
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>正则表达式定义了字符串的模式。</p>
<p>正则表达式可以用来搜索、编辑或处理文本。</p>
<p>正则表达式并不仅限于某一种语言，但是在每种语言中有细微的差别。</p>
<p>Java正则表达式和Perl的是最为相似的。</p>
<p>java.util.regex包主要包括以下三个类</p>
<ul>
<li>Pattern类：pattern对象是一个正则表达式的编译表示。Pattern类没有公共构造方法。要创建一个Pattern对象，你必须首先调用其公共静态编译方法，它返回一个Pattern对象。该方法接受一个正则表达式作为它的第一个参数。</li>
<li>Matcher类：Matcher对象是对输入字符串进行解释和匹配操作的引擎。与Pattern类一样，Matcher也没有公共构造方法。你需要调用Pattern对象的matcher方法来获得一个Matcher对象。</li>
<li>PatternSyntaxException：PatternSyntaxException是一个非强制异常类，它表示一个正则表达式模式中的语法错误。</li>
</ul>
<p>最简单的用法就是检测输入是否合法,例:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">  		String input = <span class="string">"li495469217.lhaojing@163.com.cn"</span>;</div><div class="line">  		String regex = <span class="string">"^\\w+(\\.\\w+)*@\\w+(?:\\.\\w+)+$"</span>;</div><div class="line">  		<span class="keyword">if</span>(Pattern.matches(regex, input)) &#123;</div><div class="line">  		    System.out.println(<span class="string">"邮件已发送"</span>);</div><div class="line">  		&#125;<span class="keyword">else</span> &#123;</div><div class="line">  		    System.err.println(<span class="string">"邮箱格式错误!"</span>);</div><div class="line">  		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="捕获组"><a href="#捕获组" class="headerlink" title="捕获组"></a>捕获组</h3><p>捕获组是把多个字符当一个单独单元进行处理的方法，它通过对括号内的字符分组来创建。<br>例如，正则表达式(dog) 创建了单一分组，组里包含”d”，”o”，和”g”。<br>捕获组是通过从左至右计算其开括号来编号。例如，在表达式（（A）（B（C））），有四个这样的组：</p>
<ul>
<li>((A)(B(C)))</li>
<li>(A)</li>
<li>(B(C))</li>
<li>(C)</li>
</ul>
<p>可以通过调用matcher对象的groupCount方法来查看表达式有多少个分组。groupCount方法返回一个int值，表示matcher对象当前有多个捕获组。</p>
<p>还有一个特殊的组（组0），它总是代表整个表达式。该组不包括在groupCount的返回值中。</p>
<p>实例</p>
<p>下面的例子说明如何从一个给定的字符串中找到数字串：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String args[] )</span></span>&#123;</div><div class="line">      String content = <span class="string">"I am a student in ShenYang! I'm 21.5 years old."</span>;</div><div class="line">  		String regex = <span class="string">"(?:.*?)(\\d+.\\d+)(?:.*)"</span>;</div><div class="line"></div><div class="line">  		Pattern pattern = Pattern.compile(regex);</div><div class="line">  		Matcher matcher = pattern.matcher(content);</div><div class="line"></div><div class="line">  		<span class="keyword">while</span>(matcher.find()) &#123;</div><div class="line">  			System.out.println(matcher.group(<span class="number">0</span>));</div><div class="line">  			System.out.println(matcher.group(<span class="number">1</span>));</div><div class="line">  		&#125;</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上实例编译运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">I am a student in ShenYang! I&apos;m 21.5 years old.</div><div class="line">21.5</div></pre></td></tr></table></figure></p>
<h3 id="正则表达式语法"><a href="#正则表达式语法" class="headerlink" title="正则表达式语法"></a>正则表达式语法</h3><table>
<thead>
<tr>
<th>字符</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td style="text-align:center">将下一字符标记为特殊字符、文本、反向引用或八进制转义符。例如，”n”匹配字符”n”。”\n”匹配换行符。序列”\\“匹配”\”，”\(“匹配”(“。</td>
</tr>
<tr>
<td>^</td>
<td style="text-align:center">匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与”\n”或”\r”之后的位置匹配。</td>
</tr>
<tr>
<td>$</td>
<td style="text-align:center">匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与”\n”或”\r”之前的位置匹配。</td>
</tr>
<tr>
<td>*</td>
<td style="text-align:center">零次或多次匹配前面的字符或子表达式。例如，zo* 匹配”z”和”zoo”。* 等效于 {0,}。</td>
</tr>
<tr>
<td>+</td>
<td style="text-align:center">一次或多次匹配前面的字符或子表达式。例如，”zo+”与”zo”和”zoo”匹配，但与”z”不匹配。+ 等效于 {1,}。</td>
</tr>
<tr>
<td>?</td>
<td style="text-align:center">零次或一次匹配前面的字符或子表达式。例如，”do(es)?”匹配”do”或”does”中的”do”。? 等效于 {0,1}。</td>
</tr>
<tr>
<td>{n}</td>
<td style="text-align:center">n 是非负整数。正好匹配 n 次。例如，”o{2}”与”Bob”中的”o”不匹配，但与”food”中的两个”o”匹配。</td>
</tr>
<tr>
<td>{n,}</td>
<td style="text-align:center">n 是非负整数。至少匹配 n 次。例如，”o{2,}”不匹配”Bob”中的”o”，而匹配”foooood”中的所有 o。”o{1,}”等效于”o+”。”o{0,}”等效于”o*”。</td>
</tr>
<tr>
<td>{n,m}</td>
<td style="text-align:center">M 和 n 是非负整数，其中 n &lt;= m。匹配至少 n 次，至多 m 次。例如，”o{1,3}”匹配”fooooood”中的头三个 o。’o{0,1}’ 等效于 ‘o?’。注意：您不能将空格插入逗号和数字之间。</td>
</tr>
<tr>
<td>?</td>
<td style="text-align:center">当此字符紧随任何其他限定符（*、+、?、{n}、{n,}、{n,m}）之后时，匹配模式是”非贪心的”。”非贪心的”模式匹配搜索到的、尽可能短的字符串，而默认的”贪心的”模式匹配搜索到的、尽可能长的字符串。例如，在字符串”oooo”中，”o+?”只匹配单个”o”，而”o+”匹配所有”o”。</td>
</tr>
<tr>
<td>.</td>
<td style="text-align:center">匹配除”\r\n”之外的任何单个字符。若要匹配包括”\r\n”在内的任意字符，请使用诸如”[\s\S]”之类的模式。</td>
</tr>
<tr>
<td>(pattern)</td>
<td style="text-align:center">匹配 pattern 并捕获该匹配的子表达式。可以使用 $0…$9 属性从结果”匹配”集合中检索捕获的匹配。若要匹配括号字符 ( )，请使用”(“或者”)“。</td>
</tr>
<tr>
<td>(?:pattern)</td>
<td style="text-align:center">匹配 pattern 但不捕获该匹配的子表达式，即它是一个非捕获匹配，不存储供以后使用的匹配。这对于用”or”字符 (&#124;) 组合模式部件的情况很有用。例如，’industr(?:y&#124;ies) 是比 ‘industry&#124;industries’ 更经济的表达式。</td>
</tr>
<tr>
<td>(?=pattern)</td>
<td style="text-align:center">执行正向预测先行搜索的子表达式，该表达式匹配处于匹配 pattern 的字符串的起始点的字符串。它是一个非捕获匹配，即不能捕获供以后使用的匹配。例如，’Windows (?=95&#124;98&#124;NT&#124;2000)’ 匹配”Windows 2000”中的”Windows”，但不匹配”Windows 3.1”中的”Windows”。预测先行不占用字符，即发生匹配后，下一匹配的搜索紧随上一匹配之后，而不是在组成预测先行的字符后。</td>
</tr>
<tr>
<td>(?!pattern)</td>
<td style="text-align:center">执行反向预测先行搜索的子表达式，该表达式匹配不处于匹配 pattern 的字符串的起始点的搜索字符串。它是一个非捕获匹配，即不能捕获供以后使用的匹配。例如，’Windows (?&#124;95&#124;98&#124;NT&#124;2000)’ 匹配”Windows 3.1”中的 “Windows”，但不匹配”Windows 2000”中的”Windows”。预测先行不占用字符，即发生匹配后，下一匹配的搜索紧随上一匹配之后，而不是在组成预测先行的字符后。</td>
</tr>
<tr>
<td>x&#124;y</td>
<td style="text-align:center">匹配 x 或 y。例如，’z&#124;food’ 匹配”z”或”food”。’(z&#124;f)ood’ 匹配”zood”或”food”。</td>
</tr>
<tr>
<td>[xyz]</td>
<td style="text-align:center">字符集。匹配包含的任一字符。例如，”[abc]”匹配”plain”中的”a”。</td>
</tr>
<tr>
<td>[^xyz]</td>
<td style="text-align:center">反向字符集。匹配未包含的任何字符。例如，”[^abc]”匹配”plain”中”p”，”l”，”i”，”n”。</td>
</tr>
<tr>
<td>[a-z]</td>
<td style="text-align:center">字符范围。匹配指定范围内的任何字符。例如，”[a-z]”匹配”a”到”z”范围内的任何小写字母。</td>
</tr>
<tr>
<td>[^a-z]</td>
<td style="text-align:center">反向范围字符。匹配不在指定的范围内的任何字符。例如，”[^a-z]”匹配任何不在”a”到”z”范围内的任何字符。</td>
</tr>
<tr>
<td>\b</td>
<td style="text-align:center">匹配一个字边界，即字与空格间的位置。例如，”er\b”匹配”never”中的”er”，但不匹配”verb”中的”er”。</td>
</tr>
<tr>
<td>\B</td>
<td style="text-align:center">非字边界匹配。”er\B”匹配”verb”中的”er”，但不匹配”never”中的”er”。</td>
</tr>
<tr>
<td>\cx</td>
<td style="text-align:center">匹配 x 指示的控制字符。例如，\cM 匹配 Control-M 或回车符。x 的值必须在 A-Z 或 a-z 之间。如果不是这样，则假定 c 就是”c”字符本身。</td>
</tr>
<tr>
<td>\d</td>
<td style="text-align:center">数字字符匹配。等效于 [0-9]。</td>
</tr>
<tr>
<td>\D</td>
<td style="text-align:center">非数字字符匹配。等效于 [^0-9]。</td>
</tr>
<tr>
<td>\f</td>
<td style="text-align:center">换页符匹配。等效于 \x0c 和 \cL。</td>
</tr>
<tr>
<td>\n</td>
<td style="text-align:center">换行符匹配。等效于 \x0a 和 \cJ。</td>
</tr>
<tr>
<td>\r</td>
<td style="text-align:center">匹配一个回车符。等效于 \x0d 和 \cM。</td>
</tr>
<tr>
<td>\s</td>
<td style="text-align:center">匹配任何空白字符，包括空格、制表符、换页符等。与 [ \f\n\r\t\v] 等效。</td>
</tr>
<tr>
<td>\S</td>
<td style="text-align:center">匹配任何非空白字符。与 [^ \f\n\r\t\v] 等效。</td>
</tr>
<tr>
<td>\t</td>
<td style="text-align:center">制表符匹配。与 \x09 和 \cI 等效。</td>
</tr>
<tr>
<td>\v</td>
<td style="text-align:center">垂直制表符匹配。与 \x0b 和 \cK 等效。</td>
</tr>
<tr>
<td>\w</td>
<td style="text-align:center">匹配任何字类字符，包括下划线。与”[A-Za-z0-9_]”等效。</td>
</tr>
<tr>
<td>\W</td>
<td style="text-align:center">与任何非单词字符匹配。与”[^A-Za-z0-9_]”等效。</td>
</tr>
<tr>
<td>\xn</td>
<td style="text-align:center">匹配 n，此处的 n 是一个十六进制转义码。十六进制转义码必须正好是两位数长。例如，”\x41”匹配”A”。”\x041”与”\x04”&amp;”1”等效。允许在正则表达式中使用 ASCII 代码。</td>
</tr>
<tr>
<td>\num</td>
<td style="text-align:center">匹配 num，此处的 num 是一个正整数。到捕获匹配的反向引用。例如，”(.)\1”匹配两个连续的相同字符。</td>
</tr>
<tr>
<td>\n</td>
<td style="text-align:center">标识一个八进制转义码或反向引用。如果 \n 前面至少有 n 个捕获子表达式，那么 n 是反向引用。否则，如果 n 是八进制数 (0-7)，那么 n 是八进制转义码。</td>
</tr>
<tr>
<td>\nm</td>
<td style="text-align:center">标识一个八进制转义码或反向引用。如果 \nm 前面至少有 nm 个捕获子表达式，那么 nm 是反向引用。如果 \nm 前面至少有 n 个捕获，则 n 是反向引用，后面跟有字符 m。如果两种前面的情况都不存在，则 \nm 匹配八进制值 nm，其中 n和 m 是八进制数字 (0-7)。</td>
</tr>
<tr>
<td>\nml</td>
<td style="text-align:center">当 n 是八进制数 (0-3)，m 和 l 是八进制数 (0-7) 时，匹配八进制转义码 nml。</td>
</tr>
<tr>
<td>\un</td>
<td style="text-align:center">匹配 n，其中 n 是以四位十六进制数表示的 Unicode 字符。例如，\u00A9 匹配版权符号 (©)。</td>
</tr>
</tbody>
</table>
<h3 id="Matcher类的方法"><a href="#Matcher类的方法" class="headerlink" title="Matcher类的方法"></a>Matcher类的方法</h3><ul>
<li>索引方法</li>
</ul>
<p>索引方法提供了有用的索引值，精确表明输入字符串中在哪能找到匹配：</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">方法及说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">public int start() 返回以前匹配的初始索引。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">public int start(int group) 返回在以前的匹配操作期间，由给定组所捕获的子序列的初始索引</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">public int end() 返回最后匹配字符之后的偏移量。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">public int end(int group) 返回在以前的匹配操作期间，由给定组所捕获子序列的最后字符之后的偏移量。</td>
</tr>
</tbody>
</table>
<ul>
<li>研究方法</li>
</ul>
<p>研究方法用来检查输入字符串并返回一个布尔值，表示是否找到该模式：</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">方法及说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">public boolean lookingAt() 尝试将从区域开头开始的输入序列与该模式匹配。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">public boolean find() 尝试查找与该模式匹配的输入序列的下一个子序列。</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">public boolean find(int start） 重置此匹配器，然后尝试查找匹配该模式、从指定索引开始的输入序列的下一个子序列。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">public boolean matches() 尝试将整个区域与模式匹配。</td>
</tr>
</tbody>
</table>
<ul>
<li>替换方法</li>
</ul>
<p>替换方法是替换输入字符串里文本的方法：</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">方法及说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">public Matcher appendReplacement(StringBuffer sb, String replacement) 实现非终端添加和替换步骤。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">public StringBuffer appendTail(StringBuffer sb) 实现终端添加和替换步骤。</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">public String replaceAll(String replacement) 替换模式与给定替换字符串相匹配的输入序列的每个子序列。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">public String replaceFirst(String replacement) 替换模式与给定替换字符串匹配的输入序列的第一个子序列。</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">public static String quoteReplacement(String s) 返回指定字符串的字面替换字符串。这个方法返回一个字符串，就像传递给Matcher类的appendReplacement 方法一个字面字符串一样工作。</td>
</tr>
</tbody>
</table>
<ul>
<li>start 和end 方法</li>
</ul>
<p>下面是一个对以a开头的单词出现在输入字符串中出现次数进行计数的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		String content = <span class="string">"I am a student in ShenYang! I'm 21.5 years old."</span>;</div><div class="line">		String regex = <span class="string">"\\ba[a-z]*"</span>;</div><div class="line"></div><div class="line">		Pattern pattern = Pattern.compile(regex);</div><div class="line">		Matcher matcher = pattern.matcher(content);</div><div class="line">		<span class="keyword">int</span> count = <span class="number">0</span>;</div><div class="line">		<span class="keyword">while</span>(matcher.find()) &#123;</div><div class="line">			count++;</div><div class="line">			System.out.println(matcher);</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"计数器:"</span>+count);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>以上实例编译运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">java.util.regex.Matcher[pattern=\ba[a-z]* region=0,47 lastmatch=am]</div><div class="line">java.util.regex.Matcher[pattern=\ba[a-z]* region=0,47 lastmatch=a]</div><div class="line">计数器:2</div></pre></td></tr></table></figure></p>
<p>可以看到这个例子是使用单词边界，以确保是以a开头而不是包含a。它也提供了一些关于输入字符串中匹配发生位置的有用信息。</p>
<p>Start方法返回在以前的匹配操作期间，由给定组所捕获的子序列的初始索引，end方法最后一个匹配字符的索引加1。</p>
<h5 id="matches-和lookingAt-方法"><a href="#matches-和lookingAt-方法" class="headerlink" title="matches 和lookingAt 方法"></a>matches 和lookingAt 方法</h5><p>matches 和lookingAt 方法都用来尝试匹配一个输入序列模式。它们的不同是matcher要求整个序列都匹配，而lookingAt 不要求。</p>
<p>这两个方法经常在输入字符串的开始使用。<br>我们通过下面这个例子，来解释这个功能：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		String content = <span class="string">"I am a student in ShenYang! I'm 21.5 years old."</span>;</div><div class="line">		String regex = <span class="string">"I\\sam\\sa"</span>;</div><div class="line"></div><div class="line">		Pattern pattern = Pattern.compile(regex);</div><div class="line">		Matcher matcher = pattern.matcher(content);</div><div class="line"></div><div class="line">		System.out.println(<span class="string">"content:"</span>+content);</div><div class="line">		System.out.println(<span class="string">"regex:"</span>+regex);</div><div class="line">		System.out.println(<span class="string">"lookingAt():"</span>+matcher.lookingAt());</div><div class="line">		System.out.println(<span class="string">"matches():"</span>+matcher.matches());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以上实例编译运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Current REGEX is: foo</div><div class="line">Current INPUT is: fooooooooooooooooo</div><div class="line">lookingAt(): true</div><div class="line">matches(): false</div></pre></td></tr></table></figure></p>
<h6 id="replaceFirst-和replaceAll-方法"><a href="#replaceFirst-和replaceAll-方法" class="headerlink" title="replaceFirst 和replaceAll 方法"></a>replaceFirst 和replaceAll 方法</h6><p>replaceFirst 和replaceAll 方法用来替换匹配正则表达式的文本。不同的是，replaceFirst 替换首次匹配，replaceAll 替换所有匹配。</p>
<p>下面的例子来解释这个功能：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		String content = <span class="string">"I am a student in ShenYang for 4 years! I'm 21.5 years old."</span>;</div><div class="line">		String regex = <span class="string">"\\d+\\.?\\d*"</span>;</div><div class="line"></div><div class="line">		Pattern pattern = Pattern.compile(regex);</div><div class="line">		Matcher matcher = pattern.matcher(content);</div><div class="line"></div><div class="line">		<span class="keyword">while</span>(matcher.find()) &#123;</div><div class="line">			System.out.println(matcher);</div><div class="line">		&#125;</div><div class="line">		System.out.println(<span class="string">"content:"</span>+content);</div><div class="line">		System.out.println(<span class="string">"replaceFirst:"</span>+matcher.replaceFirst(<span class="string">"****"</span>));</div><div class="line">		System.out.println(<span class="string">"replaceAll:"</span>+matcher.replaceAll(<span class="string">"****"</span>));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以上实例编译运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">java.util.regex.Matcher[pattern=\d+\.?\d* region=0,59 lastmatch=4]</div><div class="line">java.util.regex.Matcher[pattern=\d+\.?\d* region=0,59 lastmatch=21.5]</div><div class="line">content:I am a student in ShenYang for 4 years! I&apos;m 21.5 years old.</div><div class="line">replaceFirst:I am a student in ShenYang for **** years! I&apos;m 21.5 years old.</div><div class="line">replaceAll:I am a student in ShenYang for **** years! I&apos;m **** years old.</div></pre></td></tr></table></figure></p>
<h5 id="appendReplacement-和-appendTail-方法"><a href="#appendReplacement-和-appendTail-方法" class="headerlink" title="appendReplacement 和 appendTail 方法"></a>appendReplacement 和 appendTail 方法</h5><p>Matcher 类也提供了appendReplacement 和appendTail 方法用于文本替换：</p>
<p>看下面的例子来解释这个功能：<br>  <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexMatches</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		String content = <span class="string">"I am a student in ShenYang for 4 years! I'm 21.5 years old."</span>;</div><div class="line">		String regex = <span class="string">"\\d+\\.?\\d*"</span>;</div><div class="line"></div><div class="line">		Pattern pattern = Pattern.compile(regex);</div><div class="line">		Matcher matcher = pattern.matcher(content);</div><div class="line">		StringBuffer sb = <span class="keyword">new</span> StringBuffer();</div><div class="line">		<span class="keyword">while</span>(matcher.find()) &#123;</div><div class="line">			matcher.appendReplacement(sb, <span class="string">"*"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="comment">//sb = `I am a student in ShenYang for * years! I'm *`</span></div><div class="line"></div><div class="line">		matcher.appendTail(sb);</div><div class="line">		<span class="comment">//sb = I am a student in ShenYang for * years! I'm * years old.</span></div><div class="line">		System.out.println(sb);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>以上实例编译运行结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">I am a student in ShenYang for * years! I&apos;m * years old.</div></pre></td></tr></table></figure></p>
<h6 id="PatternSyntaxException-类的方法"><a href="#PatternSyntaxException-类的方法" class="headerlink" title="PatternSyntaxException 类的方法"></a>PatternSyntaxException 类的方法</h6><p>PatternSyntaxException 是一个非强制异常类，它指示一个正则表达式模式中的语法错误。</p>
<p>PatternSyntaxException 类提供了下面的方法来帮助我们查看发生了什么错误。</p>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th style="text-align:center">方法及说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">public String getDescription() 获取错误的描述。</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">public int getIndex() 获取错误的索引。</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">public String getPattern() 获取错误的正则表达式模式。</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">public String getMessage() 返回多行字符串，包含语法错误及其索引的描述、错误的正则表达式模式和模式中错误索引的可视化指示。</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/10/12/syntactic_sugar/regex/" data-id="cje9r47u7001120qvktwqu76f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/正则表达式/">正则表达式</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/17/JavaSE/java_IOStream/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Java IO
        
      </div>
    </a>
  
  
    <a href="/2017/09/27/JavaSE/java_collection/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Java 集合</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/">JVM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-Web/">Java Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/permission/">permission</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/信息安全/">信息安全</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则表达式/">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/百度地图API/">百度地图API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 13.33px;">Android</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java-Web/" style="font-size: 16.67px;">Java Web</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/permission/" style="font-size: 10px;">permission</a> <a href="/tags/信息安全/" style="font-size: 10px;">信息安全</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/百度地图API/" style="font-size: 10px;">百度地图API</a> <a href="/tags/设计模式/" style="font-size: 10px;">设计模式</a> <a href="/tags/随笔/" style="font-size: 13.33px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/01/javaEE/struct2/">Struct2</a>
          </li>
        
          <li>
            <a href="/2018/02/24/javaEE/jquery/">jQuery</a>
          </li>
        
          <li>
            <a href="/2018/01/27/javaEE/Ajax/">Ajax</a>
          </li>
        
          <li>
            <a href="/2017/12/11/javaEE/FirstJSP/">Servlet与JSP</a>
          </li>
        
          <li>
            <a href="/2017/11/12/gossip/StudyRoute/">Java Web学习路线</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 lzw<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>